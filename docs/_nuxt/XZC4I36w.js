import{c as A,i as Ce,e as I,a as z,n as Z,m as q,b as U,u as Ve,d as be,f as ae,g as ge,p as he,H as le,h as K,t as xe,j as Me,k as _e,l as Ee,o as H,L as Se,q as W,B as Pe,r as ye,w as je,s as oe,v as Ie}from"./BqdhooRP.js";import{e as N,j as k,m as T,n as Be,b,g as R,p as se,q as pe,o as X,c as ee,a as O,d as $e,t as ie,l as He,w as Ne,u as j,v as de,r as Ye,h as re,_ as Fe}from"./8FcX_UG7.js";import{u as Re}from"./B6CzDpvM.js";const[Ue,_,ce]=A("picker"),we=e=>e.find(n=>!n.disabled)||e[0];function Ae(e,n){const t=e[0];if(t){if(Array.isArray(t))return"multiple";if(n.children in t)return"cascade"}return"default"}function L(e,n){n=z(n,0,e.length);for(let t=n;t<e.length;t++)if(!e[t].disabled)return t;for(let t=n-1;t>=0;t--)if(!e[t].disabled)return t;return 0}const ue=(e,n,t)=>n!==void 0&&!!e.find(i=>i[t.value]===n);function te(e,n,t){const i=e.findIndex(d=>d[t.value]===n),l=L(e,i);return e[l]}function qe(e,n,t){const i=[];let l={[n.children]:e},d=0;for(;l&&l[n.children];){const c=l[n.children],f=t.value[d];if(l=Ce(f)?te(c,f,n):void 0,!l&&c.length){const u=we(c)[n.value];l=te(c,u,n)}d++,i.push(c)}return i}function Ke(e){const{transform:n}=window.getComputedStyle(e),t=n.slice(7,n.length-1).split(", ")[5];return Number(t)}function Le(e){return I({text:"text",value:"value",children:"children"},e)}const ve=200,fe=300,ze=15,[ke,J]=A("picker-column"),De=Symbol(ke);var Ge=N({name:ke,props:{value:Z,fields:q(Object),options:U(),readonly:Boolean,allowHtml:Boolean,optionHeight:q(Number),swipeDuration:q(Z),visibleOptionNum:q(Z)},emits:["change","clickOption","scrollInto"],setup(e,{emit:n,slots:t}){let i,l,d,c,f;const u=k(),x=k(),g=k(0),m=k(0),p=Ve(),h=()=>e.options.length,E=()=>e.optionHeight*(+e.visibleOptionNum-1)/2,D=v=>{let a=L(e.options,v);const s=-a*e.optionHeight,r=()=>{a>h()-1&&(a=L(e.options,v));const P=e.options[a][e.fields.value];P!==e.value&&n("change",P)};i&&s!==g.value?f=r:r(),g.value=s},w=()=>e.readonly||!e.options.length,B=v=>{i||w()||(f=null,m.value=ve,D(v),n("clickOption",e.options[v]))},S=v=>z(Math.round(-v/e.optionHeight),0,h()-1),$=T(()=>S(g.value)),Y=(v,a)=>{const s=Math.abs(v/a);v=g.value+s/.003*(v<0?-1:1);const r=S(v);m.value=+e.swipeDuration,D(r)},o=()=>{i=!1,m.value=0,f&&(f(),f=null)},y=v=>{if(!w()){if(p.start(v),i){const a=Ke(x.value);g.value=Math.min(0,a-E())}m.value=0,l=g.value,d=Date.now(),c=l,f=null}},C=v=>{if(w())return;p.move(v),p.isVertical()&&(i=!0,he(v,!0));const a=z(l+p.deltaY.value,-(h()*e.optionHeight),e.optionHeight),s=S(a);s!==$.value&&n("scrollInto",e.options[s]),g.value=a;const r=Date.now();r-d>fe&&(d=r,c=a)},V=()=>{if(w())return;const v=g.value-c,a=Date.now()-d;if(a<fe&&Math.abs(v)>ze){Y(v,a);return}const r=S(g.value);m.value=ve,D(r),setTimeout(()=>{i=!1},0)},M=()=>{const v={height:`${e.optionHeight}px`};return e.options.map((a,s)=>{const r=a[e.fields.text],{disabled:P}=a,F=a[e.fields.value],Oe={role:"button",style:v,tabindex:P?-1:0,class:[J("item",{disabled:P,selected:F===e.value}),a.className],onClick:()=>B(s)},Te={class:"van-ellipsis",[e.allowHtml?"innerHTML":"textContent"]:r};return b("li",Oe,[t.option?t.option(a,s):b("div",Te,null)])})};return be(De),ae({stopMomentum:o}),Be(()=>{const v=i?Math.floor(-g.value/e.optionHeight):e.options.findIndex(r=>r[e.fields.value]===e.value),a=L(e.options,v),s=-a*e.optionHeight;i&&a<v&&o(),g.value=s}),ge("touchmove",C,{target:u}),()=>b("div",{ref:u,class:J(),onTouchstartPassive:y,onTouchend:V,onTouchcancel:V},[b("ul",{ref:x,style:{transform:`translate3d(0, ${g.value+E()}px, 0)`,transitionDuration:`${m.value}ms`,transitionProperty:m.value?"all":"none"},class:J("wrapper"),onTransitionend:o},[M()])])}});const[Ze]=A("picker-toolbar"),G={title:String,cancelButtonText:String,confirmButtonText:String},Je=["cancel","confirm","title","toolbar"],Qe=Object.keys(G);var We=N({name:Ze,props:G,emits:["confirm","cancel"],setup(e,{emit:n,slots:t}){const i=()=>{if(t.title)return t.title();if(e.title)return b("div",{class:[_("title"),"van-ellipsis"]},[e.title])},l=()=>n("cancel"),d=()=>n("confirm"),c=()=>{var u;const x=(u=e.cancelButtonText)!=null?u:ce("cancel");if(!(!t.cancel&&!x))return b("button",{type:"button",class:[_("cancel"),le],onClick:l},[t.cancel?t.cancel():x])},f=()=>{var u;const x=(u=e.confirmButtonText)!=null?u:ce("confirm");if(!(!t.confirm&&!x))return b("button",{type:"button",class:[_("confirm"),le],onClick:d},[t.confirm?t.confirm():x])};return()=>b("div",{class:_("toolbar")},[t.toolbar?t.toolbar():[c(),i(),f()]])}});const[Xe,Dt]=A("picker-group"),et=Symbol(Xe);I({tabs:U(),activeTab:K(0),nextStepText:String,showToolbar:xe},G);const ne=I({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:K(44),showToolbar:xe,swipeDuration:K(1e3),visibleOptionNum:K(6)},G),tt=I({},ne,{columns:U(),modelValue:U(),toolbarPosition:Me("top"),columnsFieldNames:Object});var at=N({name:Ue,props:tt,emits:["confirm","cancel","change","scrollInto","clickOption","update:modelValue"],setup(e,{emit:n,slots:t}){const i=k(),l=k(e.modelValue.slice(0)),{parent:d}=be(et),{children:c,linkChildren:f}=_e(De);f();const u=T(()=>Le(e.columnsFieldNames)),x=T(()=>Ee(e.optionHeight)),g=T(()=>Ae(e.columns,u.value)),m=T(()=>{const{columns:a}=e;switch(g.value){case"multiple":return a;case"cascade":return qe(a,u.value,l);default:return[a]}}),p=T(()=>m.value.some(a=>a.length)),h=T(()=>m.value.map((a,s)=>te(a,l.value[s],u.value))),E=T(()=>m.value.map((a,s)=>a.findIndex(r=>r[u.value.value]===l.value[s]))),D=(a,s)=>{if(l.value[a]!==s){const r=l.value.slice(0);r[a]=s,l.value=r}},w=()=>({selectedValues:l.value.slice(0),selectedOptions:h.value,selectedIndexes:E.value}),B=(a,s)=>{D(s,a),g.value==="cascade"&&l.value.forEach((r,P)=>{const F=m.value[P];ue(F,r,u.value)||D(P,F.length?F[0][u.value.value]:void 0)}),se(()=>{n("change",I({columnIndex:s},w()))})},S=(a,s)=>{const r={columnIndex:s,currentOption:a};n("clickOption",I(w(),r)),n("scrollInto",r)},$=()=>{c.forEach(s=>s.stopMomentum());const a=w();return se(()=>{n("confirm",a)}),a},Y=()=>n("cancel",w()),o=()=>m.value.map((a,s)=>b(Ge,{value:l.value[s],fields:u.value,options:a,readonly:e.readonly,allowHtml:e.allowHtml,optionHeight:x.value,swipeDuration:e.swipeDuration,visibleOptionNum:e.visibleOptionNum,onChange:r=>B(r,s),onClickOption:r=>S(r,s),onScrollInto:r=>{n("scrollInto",{currentOption:r,columnIndex:s})}},{option:t.option})),y=a=>{if(p.value){const s={height:`${x.value}px`},r={backgroundSize:`100% ${(a-x.value)/2}px`};return[b("div",{class:_("mask"),style:r},null),b("div",{class:[Pe,_("frame")],style:s},null)]}},C=()=>{const a=x.value*+e.visibleOptionNum,s={height:`${a}px`};return!e.loading&&!p.value&&t.empty?t.empty():b("div",{ref:i,class:_("columns"),style:s},[o(),y(a)])},V=()=>{if(e.showToolbar&&!d)return b(We,pe(W(e,Qe),{onConfirm:$,onCancel:Y}),W(t,Je))};R(m,a=>{a.forEach((s,r)=>{s.length&&!ue(s,l.value[r],u.value)&&D(r,we(s)[u.value.value])})},{immediate:!0});let M;return R(()=>e.modelValue,a=>{!H(a,l.value)&&!H(a,M)&&(l.value=a.slice(0),M=a.slice(0))},{deep:!0}),R(l,a=>{H(a,e.modelValue)||(M=a.slice(0),n("update:modelValue",M))},{immediate:!0}),ge("touchmove",he,{target:i}),ae({confirm:$,getSelectedOptions:()=>h.value}),()=>{var a,s;return b("div",{class:_()},[e.toolbarPosition==="top"?V():null,e.loading?b(Se,{class:_("loading")},null):null,(a=t["columns-top"])==null?void 0:a.call(t),C(),(s=t["columns-bottom"])==null?void 0:s.call(t),e.toolbarPosition==="bottom"?V():null])}}});const nt=I({},ne,{modelValue:U(),filter:Function,formatter:{type:Function,default:(e,n)=>n}}),lt=Object.keys(ne);function ot(e,n){if(e<0)return[];const t=Array(e);let i=-1;for(;++i<e;)t[i]=n(i);return t}const st=(e,n)=>32-new Date(e,n-1,32).getDate(),Q=(e,n,t,i,l,d)=>{const c=ot(n-e+1,f=>{const u=ye(e+f);return i(t,{text:u,value:u})});return l?l(t,c,d):c},it=(e,n)=>e.map((t,i)=>{const l=n[i];if(l.length){const d=+l[0].value,c=+l[l.length-1].value;return ye(z(+t,d,c))}return t}),dt=je(at),me=new Date().getFullYear(),[rt]=A("date-picker"),ct=I({},nt,{columnsType:{type:Array,default:()=>["year","month","day"]},minDate:{type:Date,default:()=>new Date(me-10,0,1),validator:oe},maxDate:{type:Date,default:()=>new Date(me+10,11,31),validator:oe}});var ut=N({name:rt,props:ct,emits:["confirm","cancel","change","update:modelValue"],setup(e,{emit:n,slots:t}){const i=k(e.modelValue),l=k(!1),d=k(),c=T(()=>l.value?e.modelValue:i.value),f=o=>o===e.minDate.getFullYear(),u=o=>o===e.maxDate.getFullYear(),x=o=>o===e.minDate.getMonth()+1,g=o=>o===e.maxDate.getMonth()+1,m=o=>{const{minDate:y,columnsType:C}=e,V=C.indexOf(o),M=c.value[V];if(M)return+M;switch(o){case"year":return y.getFullYear();case"month":return y.getMonth()+1;case"day":return y.getDate()}},p=()=>{const o=e.minDate.getFullYear(),y=e.maxDate.getFullYear();return Q(o,y,"year",e.formatter,e.filter,c.value)},h=()=>{const o=m("year"),y=f(o)?e.minDate.getMonth()+1:1,C=u(o)?e.maxDate.getMonth()+1:12;return Q(y,C,"month",e.formatter,e.filter,c.value)},E=()=>{const o=m("year"),y=m("month"),C=f(o)&&x(y)?e.minDate.getDate():1,V=u(o)&&g(y)?e.maxDate.getDate():st(o,y);return Q(C,V,"day",e.formatter,e.filter,c.value)},D=()=>{var o;return(o=d.value)==null?void 0:o.confirm()},w=()=>i.value,B=T(()=>e.columnsType.map(o=>{switch(o){case"year":return p();case"month":return h();case"day":return E();default:return[]}}));R(i,o=>{H(o,e.modelValue)||n("update:modelValue",o)}),R(()=>e.modelValue,(o,y)=>{l.value=H(y,i.value),o=it(o,B.value),H(o,i.value)||(i.value=o),l.value=!1},{immediate:!0});const S=(...o)=>n("change",...o),$=(...o)=>n("cancel",...o),Y=(...o)=>n("confirm",...o);return ae({confirm:D,getSelectedDate:w}),()=>b(dt,pe({ref:d,modelValue:i.value,"onUpdate:modelValue":o=>i.value=o,columns:B.value,onChange:S,onCancel:$,onConfirm:Y},W(e,lt)),t)}});const vt={class:"flex justify-between items-center"},ft={class:"text-[#6E7177] text-[0.7rem]"},mt={key:0,class:"text-red-500"},bt=N({__name:"dateBox",props:{label:{type:String,required:!0},required:{type:Boolean,default:!1},modelValue:{type:String,default:""},placeholder:{type:String,default:"请选择日期"}},emits:["update:modelValue"],setup(e,{emit:n}){const t=k(!1),i=k(null),l=k([new Date().getFullYear(),new Date().getMonth()+1,new Date().getDate()]),d=new Date(new Date().getFullYear()-10,0,1),c=new Date(new Date().getFullYear()+10,11,31),f=()=>{t.value=!0},u=p=>{const h=g(p.selectedValues);i.value=h,t.value=!1,m("update:modelValue",h)},x=()=>{t.value=!1},g=p=>`${p[0]}-${p[1]}-${p[2]}`,m=n;return(p,h)=>{const E=ut,D=Ie;return X(),ee("div",null,[O("div",vt,[O("div",ft,[$e(ie(e.label)+" ",1),e.required?(X(),ee("span",mt,"*")):He("",!0)]),O("div",{class:"text-[#292929] text-[0.7rem] flex flex-row items-center justify-center",onClick:f},[O("span",null,ie(e.modelValue||e.placeholder),1),h[2]||(h[2]=O("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-[1.3rem] h-[0.74rem] inline-block"},[O("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})],-1))])]),b(D,{show:j(t),"onUpdate:show":h[1]||(h[1]=w=>de(t)?t.value=w:null),position:"bottom"},{default:Ne(()=>[b(E,{title:"选择日期","min-date":j(d),"max-date":j(c),modelValue:j(l),"onUpdate:modelValue":h[0]||(h[0]=w=>de(l)?l.value=w:null),onConfirm:u,onCancel:x},null,8,["min-date","max-date","modelValue"])]),_:1},8,["show"])])}}}),gt={class:"container"},ht={class:"mx-[0.8rem] py-4"},xt={class:"bg-white rounded-md px-4 py-4 grid grid-cols-1 gap-y-3"},yt=N({__name:"index",setup(e){Re({titleTemplate:l=>l?`${l} - 指令队列`:"指令队列"});let n=Ye({starttime:"",endtime:"",type:"",status:"",devicecode:""}),t=k(!1);const i=()=>{console.log(111),t.value=!0};return(l,d)=>{const c=bt;return X(),ee("div",gt,[O("div",ht,[O("div",xt,[b(c,{label:"创建开始时间",required:"",modelValue:j(n).starttime,"onUpdate:modelValue":d[0]||(d[0]=f=>j(n).starttime=f)},null,8,["modelValue"]),d[2]||(d[2]=O("hr",null,null,-1)),b(c,{label:"创建结束时间",required:"",modelValue:j(n).endtime,"onUpdate:modelValue":d[1]||(d[1]=f=>j(n).endtime=f)},null,8,["modelValue"]),d[3]||(d[3]=re('<hr data-v-b88138f1><div class="flex justify-between items-center" data-v-b88138f1><div class="text-[#6E7177] text-[0.7rem]" data-v-b88138f1>指令类型</div><div class="text-[#292929] text-[0.7rem] flex flex-row items-center justify-center" data-v-b88138f1><span data-v-b88138f1>请选择类型</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1.3rem] h-[0.74rem] inline-block" data-v-b88138f1><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" data-v-b88138f1></path></svg></div></div><hr data-v-b88138f1><div class="flex justify-between items-center" data-v-b88138f1><div class="text-[#6E7177] text-[0.7rem]" data-v-b88138f1>处理结果</div><div class="text-[#292929] text-[0.7rem] flex flex-row items-center justify-center" data-v-b88138f1><span data-v-b88138f1>请选择结果</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[1.3rem] h-[0.74rem] inline-block" data-v-b88138f1><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" data-v-b88138f1></path></svg></div></div><hr data-v-b88138f1><div class="flex justify-between items-center" data-v-b88138f1><div class="text-[#6E7177] text-[0.7rem]" data-v-b88138f1>设备编号</div><div class="txt-black-7" data-v-b88138f1><input type="text" placeholder="请输入设备号" class="txt-input-box" data-v-b88138f1></div></div><hr data-v-b88138f1>',7)),O("button",{class:"bg-blue-500 hover:bg-blue-700 text-white text-[0.8rem] py-2 px-8 rounded",onClick:i}," 查询 ")]),d[4]||(d[4]=re('<h3 class="text-[0.7rem] text-[#292929] mt-4 mb-2" data-v-b88138f1>未完成指令总数：2</h3><div class="bg-white shadow-md rounded-lg px-4 py-3" data-v-57d2f3b1="" data-v-b88138f1><div class="border-b border-gray-200 py-3" data-v-57d2f3b1="" data-v-b88138f1><div class="flex justify-between items-center" data-v-57d2f3b1="" data-v-b88138f1><div class="txt-gray-7" data-v-57d2f3b1="" data-v-b88138f1>创建时间</div><div class="txt-black-7" data-v-57d2f3b1="" data-v-b88138f1>2024-12-14 03:31:46</div></div></div><div class="border-b border-gray-200 py-3" data-v-57d2f3b1="" data-v-b88138f1><div class="flex justify-between items-center" data-v-57d2f3b1="" data-v-b88138f1><div class="txt-gray-7" data-v-57d2f3b1="" data-v-b88138f1>设备编号</div><div class="txt-black-7" data-v-57d2f3b1="" data-v-b88138f1>30701331</div></div></div><div class="border-b border-gray-200 py-3" data-v-57d2f3b1="" data-v-b88138f1><div class="flex justify-between items-center" data-v-57d2f3b1="" data-v-b88138f1><div class="txt-gray-7" data-v-57d2f3b1="" data-v-b88138f1>指令类型</div><div class="txt-black-7" data-v-57d2f3b1="" data-v-b88138f1>关阀</div></div></div><div class="border-b border-gray-200 py-3" data-v-57d2f3b1="" data-v-b88138f1><div class="flex justify-between items-center" data-v-57d2f3b1="" data-v-b88138f1><div class="txt-gray-7" data-v-57d2f3b1="" data-v-b88138f1>完成情况</div><div class="txt-black-7" data-v-57d2f3b1="" data-v-b88138f1>待处理</div></div></div><div class="border-b border-gray-200 py-3" data-v-57d2f3b1="" data-v-b88138f1><div class="flex justify-between items-center" data-v-57d2f3b1="" data-v-b88138f1><div class="txt-gray-7" data-v-57d2f3b1="" data-v-b88138f1>处理时间</div><div class="txt-black-7" data-v-57d2f3b1="" data-v-b88138f1>2024-12-14 03:31:46</div></div></div><button class="mt-4 w-full bg-blue-500 hover:bg-blue-700 text-white text-[0.8rem] py-2 px-8 rounded" data-v-b88138f1> 撤销 </button></div><div class="mt-4 bg-white shadow-md rounded-lg px-4 py-3" data-v-57d2f3b1="" data-v-b88138f1><div class="border-b border-gray-200 py-3" data-v-57d2f3b1="" data-v-b88138f1><div class="flex justify-between items-center" data-v-57d2f3b1="" data-v-b88138f1><div class="txt-gray-7" data-v-57d2f3b1="" data-v-b88138f1>创建时间</div><div class="txt-black-7" data-v-57d2f3b1="" data-v-b88138f1>2024-12-14 03:31:46</div></div></div><div class="border-b border-gray-200 py-3" data-v-57d2f3b1="" data-v-b88138f1><div class="flex justify-between items-center" data-v-57d2f3b1="" data-v-b88138f1><div class="txt-gray-7" data-v-57d2f3b1="" data-v-b88138f1>设备编号</div><div class="txt-black-7" data-v-57d2f3b1="" data-v-b88138f1>30701331</div></div></div><div class="border-b border-gray-200 py-3" data-v-57d2f3b1="" data-v-b88138f1><div class="flex justify-between items-center" data-v-57d2f3b1="" data-v-b88138f1><div class="txt-gray-7" data-v-57d2f3b1="" data-v-b88138f1>指令类型</div><div class="txt-black-7" data-v-57d2f3b1="" data-v-b88138f1>关阀</div></div></div><div class="border-b border-gray-200 py-3" data-v-57d2f3b1="" data-v-b88138f1><div class="flex justify-between items-center" data-v-57d2f3b1="" data-v-b88138f1><div class="txt-gray-7" data-v-57d2f3b1="" data-v-b88138f1>完成情况</div><div class="txt-black-7" data-v-57d2f3b1="" data-v-b88138f1>待处理</div></div></div><div class="border-b border-gray-200 py-3" data-v-57d2f3b1="" data-v-b88138f1><div class="flex justify-between items-center" data-v-57d2f3b1="" data-v-b88138f1><div class="txt-gray-7" data-v-57d2f3b1="" data-v-b88138f1>处理时间</div><div class="txt-black-7" data-v-57d2f3b1="" data-v-b88138f1>2024-12-14 03:31:46</div></div></div><button class="mt-4 w-full bg-blue-500 hover:bg-blue-700 text-white text-[0.8rem] py-2 px-8 rounded" data-v-b88138f1> 撤销 </button></div>',3))]),d[5]||(d[5]=O("div",{class:"h-[1rem]"},null,-1))])}}}),Ot=Fe(yt,[["__scopeId","data-v-b88138f1"]]);export{Ot as default};
